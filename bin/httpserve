#!/usr/bin/env python
import sys, SimpleHTTPServer, SocketServer

def usage():
    print 'Usage: httpserve [port]'
    print 'Serves currect working directory on specified port (default, 8080) via http.'
    sys.exit(1)

def main():
    port = 8080
    if len(sys.argv) > 1:
        try:
            port = int(sys.argv[1])
        except:
            usage()

    Handler = SimpleHTTPServer.SimpleHTTPRequestHandler
    Handler.extensions_map['.html'] = 'text/html; charset=utf-8'

    httpd = SocketServer.TCPServer(('', port), Handler)

    print 'Serving at port %d' % port
    httpd.serve_forever()

if __name__ == '__main__':
    main()
